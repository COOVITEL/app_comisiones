<h4>Cdats</h4>

<table>
    <tr>
        <td>Codigo Interno</td>
        {% comment %} <td>Nombre Nomina</td> {% endcomment %}
        <td>Plazo</td>
        <td>Valor Titulo</td>
        <td>Monto Anterios</td>
        <td>Monto Nuevo</td>
        {% comment %} <td>Fecha Titulo</td> {% endcomment %}
        <td>Tasa</td>
        <td>Factor Tasa</td>
        <td>Retencion</td>
    </tr>
    {% for cdat in cdats.cdats %}
        <tr>
            <td>{{cdat.K_IDTERC}}</td>
            {% comment %} <td>{{cdat.NOMBRE_TERCERO}}</td> {% endcomment %}
            <td>{{cdat.Q_PLADIA}}</td>
            <td id="values">{{cdat.V_TITULO}}</td>
            <td id="values">{{cdat.M_ANTERIOR}}</td>
            <td id="values">{{cdat.V_NUEVO}}</td>
            {% comment %} <td>{{cdat.F_TITULO}}</td> {% endcomment %}
            <td>{{cdat.T_NOMINAL}}</td>
            <td>{{cdat.FACTOR_PLAZO}}</td>
            <td>{{cdat.RETENCION}}</td>
        </tr>
    {% endfor %}
</table>
<p>Total Nuevo de CDATS: $ <span id="values">{{cdats.totalNuevo}}</span></p>
<p>Total Renovado de CDATS: $ <span id="values">{{cdats.totalRenovado}}</span></p>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var montos = document.querySelectorAll('#values');
        montos.forEach(function(monto) {
            if (monto.textContent!== '') {
                var num = parseFloat(monto.textContent.replace(/,/g, ''));
                monto.textContent = num.toLocaleString();
            }
        });
    });
</script>